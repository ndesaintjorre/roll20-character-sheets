<div>
    <button type="action" name="act_character">Character</button>
    <button type="action" name="act_weapons">Weapons</button>
    <button type="action" name="act_skills">Skills</button>
</div>
<input type='hidden' class='sheet-tabstoggle' name='attr_sheetTab' value='character' />
<br>

<!-- DESCRIZIONE -->
<div class='sheet-character'>

    <div class='3colrow border'>
        <div class="row">
            <!-- prima colonna -->
            <div class='col'>
                <!-- Put the content for the first column here -->
                <div class='row' style='height: 110px;'>
                </div>
            </div>
            <!-- prima colonna -->

            <!-- seconda colonna -->
            <div class='col'>
                <div class='row' style='height: 110px;'>
                    <img
                        src="./img/logo.png" />
                </div>

                <div class='row'>
                    <div class='2colrow'>
                        <div class='row'>
                            <div class='col' style='width: 1rem;'>
                                Sono
                            </div>
                            <div class='col'>
                                <input type=text width=100 name="attr_name" />
                            </div>
                        </div>
                        <br>
                        <div class='row'>
                            <div class='row'>
                                <div class='col' style='width: 1rem;'>
                                    Pregio
                                </div>
                                <div class='col'>
                                    <input type=text width=100 name="attr_pregio" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- seconda colonna -->

            <!-- terza colonna -->
            <div class='col'>
                <div class='row' style='height: 110px;'>
                </div>
                <div class='row'>
                    Un <input type=text style='width: 5rem;' name="attr_race" />
                    <input type=text style='width: 15rem;' name="attr_class" />
                </div>
                <div class='4colrow'>
                    <br>
                </div>
            </div>
            <!-- terza colonna -->
        </div>
        <br>
    </div>
    <!-- DESCRIZIONE -->

    <br>

    <!-- CARATTERISTICHE -->
    <div class='row border'>
        <div class='2colrow' style='width: 100%;'>
            <div class='col'>
                <br>
                <div class=formblock>
                    <table width=100%>
                        <thead>
                            <tr>
                                <td width=1>#</td>
                                <td>Characteristics</td>
                                <td width=1>Value</td>
                                <td width=1></td>
                                <td width=1>Bonus</td>
                                <td width=1>Pregio</td>
                            </tr>
                        </thead>
                        <tr>
                            <td><button type=roll
                                    value="&{template:default} {{name=Agilità}} {{Roll:= [[@{DEX}d10kh1 + @{DEXbonus}]] }}"></button>
                            </td>
                            <td>Agilità</td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_DEX" />
                            </td>
                            <td> D </td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_DEXbonus" /></td>
                            <td><button type=roll
                                    value="&{template:default} {{name=Pregio}} {{Roll:= [[@{DEX}d10kh1ro<2 + @{DEXbonus}]] }}">
                            </td>
                        </tr>
                        <tr>
                            <td><button type=roll
                                    value="&{template:default} {{name=Coraggio}} {{Roll:= [[ @{COR}d10kh1 + @{CORbonus} &{tracker} ]]  }}"></button>
                            </td>
                            <td>Coraggio</td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_COR" />
                            </td>
                            <td> D </td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_CORbonus" /></td>
                            <td>
                                <button type=roll
                                    value="&{template:default} {{name=Pregio}} {{ Roll:= [[@{COR}d10kh1ro<2 + @{CORbonus} &{tracker}]] }}">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button type=roll
                                    value="&{template:default} {{name=Forza}} {{Roll:= [[ @{FOR}d10kh1 + @{FORbonus}]] }}"></button>
                            </td>
                            <td>Forza</td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_FOR" />
                            </td>
                            <td> D </td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_FORbonus" /></td>
                            <td><button type=roll
                                    value="&{template:default} {{name=Pregio}} {{Roll:= [[ @{FOR}d10kh1ro<2 + @{FORbonus}]] }}">
                            </td>
                        </tr>
                        <tr>
                            <td><button type=roll
                                    value="&{template:default} {{name=Intelligenza}} {{Roll:= [[@{INT}d10kh1 + @{INTbonus}]] }}"></button>
                            </td>
                            <td>Intelligenza</td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_INT" />
                            </td>
                            <td> D </td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_INTbonus" /></td>
                            <td><button type=roll
                                    value="&{template:default} {{name=Pregio}} {{ Roll:= [[ @{INT}d10kh1ro<2 + @{INTbonus}]] }}">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button type=roll
                                    value="&{template:default} {{name=Guida}} {{ Roll:= [[@{COR}d10kh1<2 + @{CORbonus} + @{Guidabonus} &{tracker}]] }}">
                            </td>
                            <td colspan=1>Tiro Guida </td>
                            <td colspan=2>Veicolo</td>

                            <td><input type=number width=3 style='width: 3em;' name="attr_Guidabonus" /></td>
                            <td>
                                <button type=roll
                                    value="&{template:default} {{name=Pregio}} {{ Roll:= [[@{COR}d10kh1ro<2 + @{CORbonus}+@{Guidabonus} &{tracker}]] }}">
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class='col'>
                <br>
                <div class=formblock>
                    <table width=100%>
                        <thead>
                            <tr>
                                <td width=1>#</td>
                                <td>Characteristics</td>
                                <td width=1>Value</td>
                                <td width=1></td>
                                <td width=1>Bonus</td>
                                <td width=1>Pregio</td>
                            </tr>
                        </thead>
                        <tr>
                            <td><button type=roll
                                    value="&{template:default} {{name=Magia}} {{Roll:= [[ @{MAG}d10kh1 + @{MAGbonus}]] }}"></button>
                            </td>
                            <td>Magia</td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_MAG" />
                            </td>
                            <td> D </td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_MAGbonus" /></td>
                            <td><button type=roll
                                    value="&{template:default} {{name=Pregio}} {{Roll:= [[ @{MAG}d10kh1ro<2 + @{MAGbonus}]] }}">
                            </td>
                        </tr>
                        <tr>
                            <td><button type=roll
                                    value="&{template:default} {{name=Manualità}} {{Roll:= [[ @{MAN}d10kh1 + @{MANbonus}]] }}"></button>
                            </td>
                            <td>Manualità</td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_MAN" />
                            </td>
                            <td> D </td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_MANbonus" /></td>
                            <td><button type=roll
                                    value="&{template:default} {{name=Pregio}} {{Roll:= [[ @{MAN}d10kh1ro<2 + @{MANbonus}]] }}">
                            </td>
                        </tr>
                        <tr>
                            <td><button type=roll
                                    value="&{template:default} {{name=Percezione}} {{Roll:= [[ @{PER}d10kh1 + @{PERbonus}]] }}"></button>
                            </td>
                            <td>Percezione</td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_PER" />
                            </td>
                            <td> D </td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_PERbonus" /></td>
                            <td><button type=roll
                                    value="&{template:default} {{name=Pregio}} {{Roll:= [[ @{PER}d10kh1ro<2 + @{PERbonus}]] }}">
                            </td>
                        </tr>
                        <tr>
                            <td><button type=roll
                                    value="&{template:default} {{name=Socialità}} {{Roll:= [[ @{SOC}d10kh1 + @{SOCbonus}]] }}"></button>
                            </td>
                            <td>Socialità</td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_SOC" />
                            </td>
                            <td> D </td>
                            <td><input type=number width=3 style='width: 3em;' name="attr_SOCbonus" /></td>
                            <td><button type=roll
                                    value="&{template:default} {{name=Pregio}} {{Roll:= [[ @{SOC}d10kh1ro<2 + @{SOCbonus}]] }}">
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- CARATTERISTICHE -->

    <!-- STATUS -->
    <br>
    <div class='row border'>
        <table width=100%>
            <tr>
                <td style="width: 10em;"><b> Punti Avventura:</b> <input type=number name="attr_avendutrepoint" /></td>
                <td style="width: 7em;"><b> Armatura: </b><input type=number name="attr_armor" /></td>
                <td style="width: 7em;"><b> Salute: </b><input type=number name="attr_hpmax" /></td>
                <td style="width: 7em;"><b> Attuale: </b><input type=number name="attr_hpcurrent" /></td>
                <td style="width: 7em;"><b> Mana: </b><input type=number name="attr_manamax" /></td>
                <td style="width: 7em;"><b> Attuale: </b><input type=number name="attr_manacurrent" /></td>
            </tr>
        </table>
    </div>
    <!-- STATUS -->

    <!-- Items -->
    <div>
        <br>
        <div class='2colrow'>
            <div class='formblock col border nomargin' style='margin-bottom:5px!important;'>
                <h3 style="text-align: center;"> Oggetti indossati e impugnati</h3>
                <br>
                <fieldset class=repeating_items>
                    <div class='row' style='margin-bottom:5px!important;'>
                        <input type=text name="attr_itemname" style='width: 100%;'>
                    </div>
                </fieldset>
            </div>
            <div class='formblock col border nomargin' style='margin-bottom:5px!important;'>
                <h3 style="text-align: center;"> Oggetti a portata di mano</h3>
                <br>
                <fieldset class='repeating_itemsquickly'>
                    <div class='row' style='margin-bottom:5px!important;'>
                        <input type=text name="attr_itemquickly" style='width: 85%'>
                        <input type=number name="attr_itemquicklyvalue" style='width: 10%;' min="1" max="3">
                    </div>
                </fieldset>
            </div>
        </div>
        <br>

        <div class='2colrow'>
            <div class='formblock col border nomargin' style='margin-bottom:5px!important;'>
                <h3 style="text-align: center;"> Zaino</h3>
                <br>
                <fieldset class='repeating_bagpack'>
                    <div class='row' style='margin-bottom:5px!important;'>
                        <input type=text name="attr_item" style='width: 100%;'>
                    </div>
                </fieldset>
            </div>

            <div class='formblock col border nomargin' style='margin-bottom:5px!important;'>
                <div class='3colrow' style='width: 100%'>

                    <div class='col' style='width: 20%;'>
                        <div class='row'>
                            <b class='b'>Borraccia</b>
                        </div>
                        <div class='row'>
                            <input type=number name="attr_water" style='width: 100%;' min="0" max="7">
                        </div>
                    </div>
                    <div class='col' style='width: 35%'>
                        <div class='row'>
                            <b class='b'> Razioni</b>
                        </div>
                        <div class='row'>
                            <input type=number name="attr_food" style='width: 100%;' min="0" max="14">
                        </div>
                    </div>
                    <div class='col' style='width: 15%'>
                        <div class='row'>
                            <b class='b'>Radioattività</b>
                        </div>
                        <div class='row'>
                            <input type=number name="attr_radioactivity" style='width: 100%;' min="0" max="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ITEMS -->
</div>

<div class='sheet-weapons'>

    <!-- WEAPON -->
    <div class='row ' style='width: 100%;'>
        <h2 style="text-align: center;">Weapons</h2>
        <br>
        <div class='5colrow formblock' style='width: 100%;'>
            <fieldset class=repeating_weapons style='width: 100%;'>
                <div class='row border' style='margin-bottom: 10px;'>
                    <div class='row ' style='width: 100%;'>
                        <br>
                        <div class='col' style='width: 25%;'>
                            <b class='b' style='width: 100%;'>Arma</b> <br>
                            <input type=text name=attr_weaponname style='width: 100%;'>
                        </div>
                        <div class='col' style='width: 5%;'>
                            <b class='b' style=' width: 100%;'>Danno</b><br>
                            <input type=text name=attr_weapondamage style='width: 100%;'>
                        </div>
                        <div class='col' style='width: 5%;'>
                            <b class='b' style=' width: 100%;'>Mod</b><br>
                            <input type=number name=attr_damagebonus style='width: 100%;'>
                        </div>
                        <div class='col' style='width: 5%;'>
                                <b class='b' style='width: 100%;'>Extra</b><br>
                                <input type=text name=attr_weaponextradamage style='width: 100%;'>
                            </div>
                        <div class='col' style='width: 5%;'>
                            <b class='b' style=' width: 100%;'>Roll</b><br>
                            <button type=roll
                                value="&{template:default} {{name=@{weaponname}}} {{damage= [[@{weapondamage}@{weaponextradamage}kh1+@{damagebonus}]]}}"></button>
                        </div>
                        <div class='col' style='width: 10%;'>
                            <b class='b' style='width: 100%;'>Cal</b><br>
                            <input type=text name=attr_weaponcal style='width: 100%;'>
                        </div>
                        <div class='col' style='width: 8%;'>
                            <b class='b' style='width: 100%;'>Munizioni</b><br>
                            <input type=text name=attr_weaponammo style='width: 100%;'>
                        </div>
                        <div class='col' style='width: 32%;'>
                            <b class='b' style='width: 100%;'>Note</b><br>
                            <input type=text name=attr_weaponnote style='width: 100%;'>
                        </div>
                    </div>
                    <div class='row' style='width: 100%;'>
                        <div class='col' style='width: 5%;'>
                                <b class='b' style=' width: 100%;'>Tiro</b><br>
                                <input type=text name=attr_weapontiro style='width: 100%;'>
                        </div>
                        <div class='col' style='width: 5%;'>
                            <b class='b' style=' width: 100%;'>Mod</b><br>
                            <input type=number name=attr_attackbonus style='width: 100%;'>
                        </div>
                        <div class='col' style='width: 5%;'>
                                <b class='b' style='width: 100%;'>Extra</b><br>
                                <input type=text name=attr_weaponextraroll style='width: 100%;'>
                            </div>
                        <div class='col' style='width: 5%;' align=center>
                            <b class='b' style=' width: 100%;'>Roll</b><br>
                            <button type=roll
                                value="&{template:default} {{name=@{weaponname}}} {{Roll:= [[@{weapontiro}@{weaponextraroll}kh1+@{attackbonus}]]}} {{damage= [[@{weapondamage}@{weaponextradamage}kh1+@{damagebonus}]] }}"></button>
                        </div>
                        <div class='col' style='width: 5%;'>
                            <b class='b' style='width: 100%;'>Incep</b><br>
                            <input type=text name=attr_weaponincep style='width: 100%;'>
                        </div>
                        <div class='col' style='width: 5%;' align=center>
                            <b class='b' style=' width: 100%;'>Roll</b><br>
                            <button type=roll
                                value="&{template:default} {{name=Inceppamento}} {{Roll:= [[@{weaponincep}]]}}"></button>
                        </div>
                            <div class='col' style='width: 13%;' align=center>
                                <b class='b' style=' width: 100%;'>Semi-automatico</b><br>
                                <button type=roll
                                value="&{template:default} {{name=@{weaponname} - SemiAutomatico}}  {{Roll:= [[@{weapontiro}@{weaponextraroll}kh1+@{attackbonus}]] [[@{weapontiro}@{weaponextraroll}kh1+@{attackbonus}]]}} {{damage= [[@{weapondamage}@{weaponextradamage}kh1+@{damagebonus}]] [[@{weapondamage}@{weaponextradamage}kh1+@{damagebonus}]] }}"></button>
                            </div>
                            <div class='col' style='width: 7%;' align=center>
                                <b class='b' style=' width: 100%;'>HeadShot</b><br>
                                <button type=roll
                                    value="&{template:default} {{name=@{weaponname} - HEADSHOT}} {{damage= [[D10]]}}"></button>
                            </div>
                            <div class='col' style='width: 12%;' align=center>
                                <b class='b' style=' width: 100%;'>Max colpi</b><br>
                                <button type=roll
                                    value="&{template:default} {{name=N° Massimo di colpi messi a segno}} {{Roll:= [[D4+@{MANbonus}]]}}"></button>
                            </div>
                            <div class='col' style='width: 32%;'>
                            <b class='b' style='width: 100%;'>Note</b><br>
                            <input type=text name=attr_weaponnote2 style='width: 100%;'>
                        </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
    <!-- WEAPON -->
</div>

<!-- Skills -->
<div class='sheet-skills'>

    <!-- Skills -->
    <div class='row' style='width: 100%;'>
        <h2 style="text-align: center;">Skills</h2>
        <div class='2colrow formblock' style='width: 100%;margin-top:10px;'>
            <fieldset class=repeating_skills style='width: 100%;'>

                <div class='row border' style='margin-bottom:10px;'>
                    <div class='col' style='width: 30%;'>
                        <b class='b' style='width: 100%;'>Nome</b>
                        <div class='row'>
                            <input type=text name=attr_skills_name style='width: 100%;'>
                        </div>
                    </div>

                    <div class='col' style='width: 65%;'>
                        <div class='row'>
                            <b class='b' style='width: 100%;'>Descrizione</b>
                            <input type="checkbox" class="sheet-toggle-show"/>
                            <br>
                            <div class="sheet-body">
                                <div class="sheet-auto-expand">
                                    <span name="attr_skills_desc"></span>
                                    <textarea name="attr_skills_desc" style="width:100%;"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
    <!-- Skills -->

</div>



<script type="text/worker">
    const buttonlist = ["character","weapons","skills"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });
    
    //on('sheet:opened',function(){
    //});
    
    //on('change:COR_Pregio', function(eventInfo) {
      //  console.log(eventInfo);
        //getAttrs(['RollCOR'], function(values) {
          //  var roll = "&{template:default} {{name=Pregio}} {{Roll:= [[{@{COR}d10}ro<2kh1 + @{CORbonus}]] }}"
            //console.log(values);
        //setAttrs({'RollCOR': roll});
     // });
    //    });

  
</script>